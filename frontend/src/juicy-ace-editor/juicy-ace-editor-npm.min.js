const $template=document.createElement("template");$template.innerHTML='<template id="juicy-ace-editor">\n    <style>\n        :host{\n            display: flex;\n            min-height: 1em;\n            flex-direction: column;\n        }\n        #juicy-ace-editor-container{\n            flex: 1;\n            height: 100%;\n        }\n    </style>\n    <div id="juicy-ace-editor-container"></div>\n</template>',document.head.appendChild($template.content);var template=document.querySelector("template#juicy-ace-editor").content;window.customElements.define("juicy-ace-editor",class extends HTMLElement{get value(){return this.editor&&this.editor.getValue()||this.textContent}set value(e){this.editor?(this._ignoreChange=!0,this.editor.setValue(e),this._ignoreChange=!1):this.textContent=e}static get observedAttributes(){return["theme","mode","fontsize","softtabs","tabsize","readonly","wrapmode","min-lines","max-lines","shadow-style"]}constructor(){super(),this._ignoreChange=!1;var e=this.attachShadow({mode:"open"}),t=document.importNode(template,!0);this.container=t.querySelector("#juicy-ace-editor-container"),e.appendChild(t)}connectedCallback(){var e,t=this.childNodes[0],i=this.container,s=this;if(this.editor)e=this.editor;else{i.textContent=this.value;const t={};this.hasAttribute("max-lines")&&(t.maxLines=Number(this.getAttribute("max-lines"))),this.hasAttribute("min-lines")&&(t.minLines=Number(this.getAttribute("min-lines"))),e=ace.edit(i,t),this.dispatchEvent(new CustomEvent("editor-ready",{bubbles:!0,composed:!0,detail:e})),this.editor=e,this.injectTheme("#ace_editor\\.css"),this.injectTheme("#ace-tm"),this.injectTheme("#ace_searchbox"),e.getSession().on("change",e=>{this._ignoreChange||s.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:e}))}),this._beautify=ace.require("ace/ext/beautify")}e.renderer.addEventListener("themeLoaded",this.onThemeLoaded.bind(this)),e.setTheme(this.getAttribute("theme")),e.setFontSize(Number(this.getAttribute("fontsize"))||12),e.setReadOnly(this.hasAttribute("readonly"));var a=e.getSession();a.setMode(this.getAttribute("mode")),a.setUseSoftTabs(this.getAttribute("softtabs")),this.getAttribute("tabsize")&&a.setTabSize(this.getAttribute("tabsize")),a.setUseWrapMode(this.hasAttribute("wrapmode")),this.hasAttribute("shadow-style")&&this.injectTheme(this.getAttribute("shadow-style"));var n=new MutationObserver(function(e){e.forEach(function(e){"characterData"==e.type&&(s.value=t.data)})});t&&n.observe(t,{characterData:!0}),this._attached=!0}beautify(){this._beautify.beautify(this.editor.session)}disconnectedCallback(){this._attached=!1}attributeChangedCallback(e,t,i){if(!this._attached)return!1;switch(e){case"theme":this.editor.setTheme(i);break;case"mode":this.editor.getSession().setMode(i);break;case"fontsize":this.editor.setFontSize(i);break;case"softtabs":this.editor.getSession().setUseSoftTabs(i);break;case"tabsize":this.editor.getSession().setTabSize(i);break;case"readonly":this.editor.setReadOnly(""===i||i);break;case"wrapmode":this.editor.getSession().setUseWrapMode(null!==i);break;case"max-lines":this.editor&&(this.editor.renderer.$maxLines=Number(i));break;case"min-lines":this.editor&&(this.editor.renderer.$minLines=Number(i));break;case"shadow-style":t&&this.shadowRoot.querySelector(t).remove(),this.injectTheme(i)}}onThemeLoaded(e){var t="#"+e.theme.cssClass;this.injectTheme(t),this.container.style.display="none",this.container.offsetHeight,this.container.style.display=""}injectTheme(e){const t=this.getRootNode().querySelector(e)||document.querySelector(e);this.shadowRoot.appendChild(t.cloneNode(!0))}});